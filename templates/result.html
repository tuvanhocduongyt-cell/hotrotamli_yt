{% extends "layout.html" %}
{% block title %}Káº¿t quáº£ bÃ i lÃ m{% endblock %}
{% block content %}
<h2>ğŸ‰ Káº¿t quáº£ bÃ i lÃ m</h2>
<p><strong>Sá»‘ cÃ¢u Ä‘Ãºng:</strong> {{ score }} / {{ total_questions }}</p>

<!-- Báº£ng káº¿t quáº£ tá»«ng cÃ¢u -->
{% if total_questions is defined and results is defined %}
  <table border="1" cellpadding="8" style="margin-top: 20px; border-collapse: collapse; width: 100%;">
    <thead style="background-color: #f0f0f0;">
      <tr>
        <th style="text-align: center;">CÃ¢u sá»‘</th>
        <th style="text-align: center;">Tráº¡ng thÃ¡i</th>
        <th>Ghi chÃº</th>
      </tr>
    </thead>
    <tbody>
      {% for i in range(total_questions|int) %}
        <tr>
          <td style="text-align: center;">{{ i + 1 }}</td>
          {% if results[i].status == "Sai" %}
            <td style="color: red; text-align: center;">âŒ Sai</td>
            <td>{{ results[i].note }}</td>
          {% else %}
            <td style="color: green; text-align: center;">âœ… ÄÃºng</td>
            <td>â€”</td>
          {% endif %}
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <p style="color: red;">âš ï¸ KhÃ´ng nháº­n Ä‘Æ°á»£c dá»¯ liá»‡u káº¿t quáº£. Vui lÃ²ng kiá»ƒm tra láº¡i hÃ m <code>submit</code>.</p>
{% endif %}

<!-- CÃ¡c lá»—i há»c sinh máº¯c pháº£i -->
{% if feedback %}
  <div style="margin-top: 30px;">
    <h3>âŒ Tá»•ng há»£p lá»—i:</h3>
    <ul>
      {% for f in feedback %}
        <li>{{ f }}</li>
      {% endfor %}
    </ul>
  </div>
{% endif %}

<!-- Pháº£n há»“i tá»« AI -->
{% if ai_feedback %}
  <div style="margin-top: 30px; background: #fffbe6; padding: 20px; border-left: 5px solid #f1c40f; border-radius: 8px;">
    <h3>ğŸ¤– Pháº£n há»“i tá»« AI:</h3>
    <div style="line-height: 1.8; white-space: pre-line;">{{ ai_feedback|safe }}</div>
  </div>
{% endif %}

<!-- Quay vá» trang chÃ­nh -->
<div style="margin-top: 30px;">
  <a href="/">â¬…ï¸ Quay vá» trang chÃ­nh</a>
</div>
{% endblock %}